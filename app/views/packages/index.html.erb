<meta name="viewport" content="width=device-width, initial-scale=1.0">

<p id="notice"><%= notice %></p>

<div class="card-category" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url(https://res.cloudinary.com/vmontenegro7/image/upload/v1646415427/Recy-Buddies/Think-Cans_i67goa.png)">
  <div><h1 style="color: #25EA7F" id="Packages-title">Recycling Packages</h1></div>

  <% if user_signed_in? %>
    <div><h2>Welcome <%= current_user.email %></h2></div>
  <% end %>
</div>

<div class="row">
  <table>
    <thead>
      <tr>
        <div class="column"><th>Address</th></div>
        <div class="column"><th>Content</th></div>
        <div class="column"><th>User</th></div>
        <div class="column"><th>Show</th></div>
        <th colspan="3"></th>
      </tr>
    </thead>


    <tbody>
      <% @packages.each do |package| %>
        <tr>
        <% if package.picked_up == true %>
          <% next %>
        <% else %>
          <td><%= package.address %></td>
          <td><%= package.content %></td>
          <td><%= package.user.email %></td>
          <td><%= link_to 'Details', package %></td>
          <% unless current_user.id == package.user_id%>
            <% unless package.picked_up == true %>
              <!--<td><%= link_to 'Pick Up', new_pick_up_path({package_id: package.id, user_id: current_user.id}) %></td>--> <!--new_user_pick_up_path -->
              <td><%= button_to 'Pick Up', pick_ups_path({package_id: package.id, user_id: current_user.id}), method: :post %></td>
              <!--user_pick_ups_path-->
            <% end %>
          <% end %>
        <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
<%# <br> %>
  <div class="cards">
    <div class="card-category">
    <strong>Address</strong>
    <strong>Content</strong>
    <strong>User</strong>
    <strong>Show</strong>
    <strong>Picked up</strong>

    </div>
  </div>

<% if policy(Package).create? %>
  <%= link_to 'New Package', new_package_path %>
<% end %>
